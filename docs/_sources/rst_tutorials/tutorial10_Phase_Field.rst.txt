Phase Field
########################################


.. figure:: ../../images/Desmos/Phase_Field.png
    :alt: Geometry of the phase field model
    :align: center
    :scale: 60%

    Figure 1: Geometry of the uniaxial compression strength test


==================================
1 Main Steps
==================================

#. Initialize the model.
#. Create the geometry and the mesh
#. Assign material properties.
#. Create the group and assign boundary conditions.
#. Set the outputs.

==================================
2 Codes
==================================
Please note that, all the setting in the example is based on the developer's computer. You may need to change 
these setting based on your own conditions.

To start with programming, create a new empty text file (later add the `.of` extension). Begin writing the following commands:

-------------------------------------------------------------------
2.1 Initialize the model
-------------------------------------------------------------------
1. Create a new run and clean up the old memories.

.. literalinclude:: examples/PhaseFieldModelforModeIcrack/runme.of
    :lines: 39

2. Set up the folder name to save your results. Here the folder name is set to be “result”.

.. literalinclude:: examples/PhaseFieldModelforModeIcrack/runme.of
    :lines: 43

3. Turn off the contact module, no contacts will be considered in this simulation.

.. literalinclude:: examples/PhaseFieldModelforModeIcrack/runme.of
    :lines: 46

4. Set the minangle to delete the bad segments for joints and DFNs.

.. literalinclude:: examples/PhaseFieldModelforModeIcrack/runme.of
    :lines: 49

5. Set the number of cores to be used for running this model.

.. literalinclude:: examples/PhaseFieldModelforModeIcrack/runme.of
    :lines: 53

-------------------------------------------------------------------
2.2 Create the geometry and the mesh
-------------------------------------------------------------------
1. See Figur 1 to create a polygon with 9 points.

.. literalinclude:: examples/PhaseFieldModelforModeIcrack/runme.of
    :lines: 56-65

2. Cut the joints in the plate.

.. literalinclude:: examples/PhaseFieldModelforModeIcrack/runme.of
    :lines: 68

3. Group the geometries.

.. literalinclude:: examples/PhaseFieldModelforModeIcrack/runme.of
    :lines: 70-71

4. Set different mesh size for different group of geometries.

.. literalinclude:: examples/PhaseFieldModelforModeIcrack/runme.of
    :lines: 73-76

5. Create the mesh.

.. literalinclude:: examples/PhaseFieldModelforModeIcrack/runme.of
    :lines: 78

6. Group the elements in a mesh.

.. literalinclude:: examples/PhaseFieldModelforModeIcrack/runme.of
    :lines: 80

-------------------------------------------------------------------
2.3 Assign Material and Thermal Properties
-------------------------------------------------------------------
1. Set the material properties.

.. literalinclude:: examples/PhaseFieldModelforModeIcrack/runme.of
    :lines: 84-85

2. Assign materials contacts.

.. literalinclude:: examples/PhaseFieldModelforModeIcrack/runme.of
    :lines: 87

-------------------------------------------------------------------
2.4 Create Groups and Assign Boundary Conditions
-------------------------------------------------------------------
1. Group the nodes to prepare for the next step.

.. literalinclude:: examples/PhaseFieldModelforModeIcrack/runme.of
    :lines: 90-91

2. Assign the pressure boundary conditions.

.. literalinclude:: examples/PhaseFieldModelforModeIcrack/runme.of
    :lines: 98-99

-------------------------------------------------------------------
2.5 Set the Outputs
-------------------------------------------------------------------
1. Set the output interval to be every 2000 steps and output all fields variables and fracture variables. Control the output interval to a reasonable size could shorten the computation time but get a good understanding of the model.

.. literalinclude:: examples/PhaseFieldModelforModeIcrack/runme.of
    :lines: 103-104

2. The program will run 100000 steps in total. In other words, it will output 10 files for reference.

.. literalinclude:: examples/PhaseFieldModelforModeIcrack/runme.of
    :lines: 108

3. Finalize the model and clear all the temporary memories.

.. literalinclude:: examples/PhaseFieldModelforModeIcrack/runme.of
    :lines: 110

4. Save the notepad and double click the .of file to run the program.

==================================
3 Run the Program
==================================
When you run the program, you can first check the mesh that was created by Gmsh as shown in Figure 2. If the mesh has a good quality, you can close the window to continue run the program.

.. figure:: ../../images/Gmsh/Phase_Field.png
    :alt: Mesh of the sample
    :align: center
    :scale: 60%

    Figure 2: Mesh created by Gmsh


The phase field module is ON in this model.

.. figure:: ../../images/Command/Phase_Field_module.png
    :alt: Phase field module is ON
    :align: center
    :scale: 80%

    Figure 3: Global modules


Material properties you set on step 2.3 will be shown on the screen. You can confirm it while the program just starts to run.

.. figure:: ../../images/Command/Phase_Field_Material.png
    :alt: Material assignment
    :align: center
    :scale: 55%

    Figure 4: Check the material assignment from command window



==================================
4 Results
==================================
Wait for updates.



==================================
5 Full Script
==================================

- `Phase_Field.of`_ (click to download from GitHub)

.. _Phase_Field.of: https://github.com/OpenFDEM-geomechanics/Examples/blob/main/PhaseFieldModelforModeIcrack/runme.of

.. literalinclude:: examples/PhaseFieldModelforModeIcrack/runme.of
    :lines: 37-110



.. raw:: html

   <script src="//clustrmaps.com/globe.js?d=IJDdJTOZeBy5TaHUiVkIm7GLGSulnk0C2NzaC4-34QA">
   </script>


